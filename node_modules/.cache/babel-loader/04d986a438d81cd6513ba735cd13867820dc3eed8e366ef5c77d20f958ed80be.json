{"ast":null,"code":"import { jsx } from \"react/jsx-runtime\";\nimport { GlitchEffect, GlitchMode } from \"postprocessing\";\nimport { forwardRef, useMemo, useLayoutEffect, useEffect } from \"react\";\nimport { useThree } from \"@react-three/fiber\";\nimport { useVector2 } from \"../util.js\";\nconst Glitch = forwardRef(function Glitch2({\n  active = true,\n  ...props\n}, ref) {\n  const invalidate = useThree(state => state.invalidate);\n  const delay = useVector2(props, \"delay\");\n  const duration = useVector2(props, \"duration\");\n  const strength = useVector2(props, \"strength\");\n  const chromaticAberrationOffset = useVector2(props, \"chromaticAberrationOffset\");\n  const effect = useMemo(() => new GlitchEffect({\n    ...props,\n    delay,\n    duration,\n    strength,\n    chromaticAberrationOffset\n  }), [delay, duration, props, strength, chromaticAberrationOffset]);\n  useLayoutEffect(() => {\n    effect.mode = active ? props.mode || GlitchMode.SPORADIC : GlitchMode.DISABLED;\n    invalidate();\n  }, [active, effect, invalidate, props.mode]);\n  useEffect(() => {\n    return () => {\n      var _a;\n      (_a = effect.dispose) == null ? void 0 : _a.call(effect);\n    };\n  }, [effect]);\n  return /* @__PURE__ */jsx(\"primitive\", {\n    ref,\n    object: effect,\n    dispose: null\n  });\n});\nexport { Glitch };","map":{"version":3,"names":["Glitch","forwardRef","Glitch2","active","props","ref","invalidate","useThree","state","delay","useVector2","duration","strength","chromaticAberrationOffset","effect","useMemo","GlitchEffect","useLayoutEffect","mode","GlitchMode","SPORADIC","DISABLED","useEffect","_a","dispose","call","jsx","object"],"sources":["/Users/kasaikazunobu/project/babel/babel-project/node_modules/@react-three/postprocessing/src/effects/Glitch.tsx"],"sourcesContent":["import { Vector2 } from 'three'\nimport { GlitchEffect, GlitchMode } from 'postprocessing'\nimport { Ref, forwardRef, useMemo, useLayoutEffect, useEffect } from 'react'\nimport { ReactThreeFiber, useThree } from '@react-three/fiber'\nimport { useVector2 } from '../util'\n\nexport type GlitchProps = ConstructorParameters<typeof GlitchEffect>[0] &\n  Partial<{\n    mode: GlitchMode\n    active: boolean\n    delay: ReactThreeFiber.Vector2\n    duration: ReactThreeFiber.Vector2\n    chromaticAberrationOffset: ReactThreeFiber.Vector2\n    strength: ReactThreeFiber.Vector2\n  }>\n\nexport const Glitch = forwardRef<GlitchEffect, GlitchProps>(function Glitch(\n  { active = true, ...props }: GlitchProps,\n  ref: Ref<GlitchEffect>\n) {\n  const invalidate = useThree((state) => state.invalidate)\n  const delay = useVector2(props, 'delay')\n  const duration = useVector2(props, 'duration')\n  const strength = useVector2(props, 'strength')\n  const chromaticAberrationOffset = useVector2(props, 'chromaticAberrationOffset')\n  const effect = useMemo(\n    () => new GlitchEffect({ ...props, delay, duration, strength, chromaticAberrationOffset }),\n    [delay, duration, props, strength, chromaticAberrationOffset]\n  )\n  useLayoutEffect(() => {\n    effect.mode = active ? props.mode || GlitchMode.SPORADIC : GlitchMode.DISABLED\n    invalidate()\n  }, [active, effect, invalidate, props.mode])\n  useEffect(() => {\n    return () => {\n      effect.dispose?.()\n    }\n  }, [effect])\n  return <primitive ref={ref} object={effect} dispose={null} />\n})\n"],"mappings":";;;;;AAgBa,MAAAA,MAAA,GAASC,UAAA,CAAsC,SAASC,QACnE;EAAEC,MAAA,GAAS;EAAM,GAAGC;AAAM,GAC1BC,GAAA,EACA;EACA,MAAMC,UAAA,GAAaC,QAAA,CAAUC,KAAA,IAAUA,KAAA,CAAMF,UAAU;EACjD,MAAAG,KAAA,GAAQC,UAAA,CAAWN,KAAA,EAAO,OAAO;EACjC,MAAAO,QAAA,GAAWD,UAAA,CAAWN,KAAA,EAAO,UAAU;EACvC,MAAAQ,QAAA,GAAWF,UAAA,CAAWN,KAAA,EAAO,UAAU;EACvC,MAAAS,yBAAA,GAA4BH,UAAA,CAAWN,KAAA,EAAO,2BAA2B;EAC/E,MAAMU,MAAA,GAASC,OAAA,CACb,MAAM,IAAIC,YAAA,CAAa;IAAE,GAAGZ,KAAA;IAAOK,KAAA;IAAOE,QAAA;IAAUC,QAAA;IAAUC;EAAA,CAA2B,GACzF,CAACJ,KAAA,EAAOE,QAAA,EAAUP,KAAA,EAAOQ,QAAA,EAAUC,yBAAyB;EAE9DI,eAAA,CAAgB,MAAM;IACpBH,MAAA,CAAOI,IAAA,GAAOf,MAAA,GAASC,KAAA,CAAMc,IAAA,IAAQC,UAAA,CAAWC,QAAA,GAAWD,UAAA,CAAWE,QAAA;IAC3Df,UAAA;EAAA,GACV,CAACH,MAAA,EAAQW,MAAA,EAAQR,UAAA,EAAYF,KAAA,CAAMc,IAAI,CAAC;EAC3CI,SAAA,CAAU,MAAM;IACd,OAAO,MAAM;;MACX,CAAAC,EAAA,GAAAT,MAAA,CAAOU,OAAA,KAAP,gBAAAD,EAAA,CAAAE,IAAA,CAAAX,MAAA;IAAiB;EACnB,GACC,CAACA,MAAM,CAAC;EACX,sBAAAY,GAAA,CAAQ,aAAU;IAAArB,GAAA;IAAUsB,MAAA,EAAQb,MAAA;IAAQU,OAAA,EAAS;EAAM;AAC7D,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}