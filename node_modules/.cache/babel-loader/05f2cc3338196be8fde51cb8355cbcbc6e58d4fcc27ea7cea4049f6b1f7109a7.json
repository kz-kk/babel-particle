{"ast":null,"code":"import { jsx } from \"react/jsx-runtime\";\nimport { forwardRef, useContext, useMemo } from \"react\";\nimport { SSAOEffect, BlendFunction } from \"postprocessing\";\nimport { EffectComposerContext } from \"../EffectComposer.js\";\nconst SSAO = forwardRef(function SSAO2(props, ref) {\n  const {\n    camera,\n    normalPass,\n    downSamplingPass,\n    resolutionScale\n  } = useContext(EffectComposerContext);\n  const effect = useMemo(() => {\n    if (normalPass === null && downSamplingPass === null) {\n      console.error(\"Please enable the NormalPass in the EffectComposer in order to use SSAO.\");\n      return {};\n    }\n    return new SSAOEffect(camera, normalPass && !downSamplingPass ? normalPass.texture : null, {\n      blendFunction: BlendFunction.MULTIPLY,\n      samples: 30,\n      rings: 4,\n      distanceThreshold: 1,\n      distanceFalloff: 0,\n      rangeThreshold: 0.5,\n      rangeFalloff: 0.1,\n      luminanceInfluence: 0.9,\n      radius: 20,\n      bias: 0.5,\n      intensity: 1,\n      color: void 0,\n      // @ts-ignore\n      normalDepthBuffer: downSamplingPass ? downSamplingPass.texture : null,\n      resolutionScale: resolutionScale != null ? resolutionScale : 1,\n      depthAwareUpsampling: true,\n      ...props\n    });\n  }, [camera, normalPass, props]);\n  return /* @__PURE__ */jsx(\"primitive\", {\n    ref,\n    object: effect,\n    dispose: null\n  });\n});\nexport { SSAO };","map":{"version":3,"names":["SSAO","forwardRef","SSAO2","props","ref","camera","normalPass","downSamplingPass","resolutionScale","useContext","EffectComposerContext","effect","useMemo","console","error","SSAOEffect","texture","blendFunction","BlendFunction","MULTIPLY","samples","rings","distanceThreshold","distanceFalloff","rangeThreshold","rangeFalloff","luminanceInfluence","radius","bias","intensity","color","normalDepthBuffer","depthAwareUpsampling","jsx","object","dispose"],"sources":["/Users/kasaikazunobu/project/babel/babel-project/node_modules/@react-three/postprocessing/src/effects/SSAO.tsx"],"sourcesContent":["import { Ref, forwardRef, useContext, useMemo } from 'react'\nimport { SSAOEffect, BlendFunction } from 'postprocessing'\nimport { EffectComposerContext } from '../EffectComposer'\n\n// first two args are camera and texture\ntype SSAOProps = ConstructorParameters<typeof SSAOEffect>[2]\n\nexport const SSAO = forwardRef<SSAOEffect, SSAOProps>(function SSAO(props: SSAOProps, ref: Ref<SSAOEffect>) {\n  const { camera, normalPass, downSamplingPass, resolutionScale } = useContext(EffectComposerContext)\n  const effect = useMemo<SSAOEffect | {}>(() => {\n    if (normalPass === null && downSamplingPass === null) {\n      console.error('Please enable the NormalPass in the EffectComposer in order to use SSAO.')\n      return {}\n    }\n    return new SSAOEffect(camera, normalPass && !downSamplingPass ? (normalPass as any).texture : null, {\n      blendFunction: BlendFunction.MULTIPLY,\n      samples: 30,\n      rings: 4,\n      distanceThreshold: 1.0,\n      distanceFalloff: 0.0,\n      rangeThreshold: 0.5,\n      rangeFalloff: 0.1,\n      luminanceInfluence: 0.9,\n      radius: 20,\n      bias: 0.5,\n      intensity: 1.0,\n      color: undefined,\n      // @ts-ignore\n      normalDepthBuffer: downSamplingPass ? downSamplingPass.texture : null,\n      resolutionScale: resolutionScale ?? 1,\n      depthAwareUpsampling: true,\n      ...props,\n    })\n  }, [camera, normalPass, props])\n  return <primitive ref={ref} object={effect} dispose={null} />\n})\n"],"mappings":";;;;AAOO,MAAMA,IAAA,GAAOC,UAAA,CAAkC,SAASC,MAAKC,KAAA,EAAkBC,GAAA,EAAsB;EAC1G,MAAM;IAAEC,MAAA;IAAQC,UAAA;IAAYC,gBAAA;IAAkBC;EAAA,IAAoBC,UAAA,CAAWC,qBAAqB;EAC5F,MAAAC,MAAA,GAASC,OAAA,CAAyB,MAAM;IACxC,IAAAN,UAAA,KAAe,QAAQC,gBAAA,KAAqB,MAAM;MACpDM,OAAA,CAAQC,KAAA,CAAM,0EAA0E;MACxF,OAAO;IACT;IACO,WAAIC,UAAA,CAAWV,MAAA,EAAQC,UAAA,IAAc,CAACC,gBAAA,GAAoBD,UAAA,CAAmBU,OAAA,GAAU,MAAM;MAClGC,aAAA,EAAeC,aAAA,CAAcC,QAAA;MAC7BC,OAAA,EAAS;MACTC,KAAA,EAAO;MACPC,iBAAA,EAAmB;MACnBC,eAAA,EAAiB;MACjBC,cAAA,EAAgB;MAChBC,YAAA,EAAc;MACdC,kBAAA,EAAoB;MACpBC,MAAA,EAAQ;MACRC,IAAA,EAAM;MACNC,SAAA,EAAW;MACXC,KAAA,EAAO;MAAA;MAEPC,iBAAA,EAAmBxB,gBAAA,GAAmBA,gBAAA,CAAiBS,OAAA,GAAU;MACjER,eAAA,EAAiBA,eAAA,WAAAA,eAAA,GAAmB;MACpCwB,oBAAA,EAAsB;MACtB,GAAG7B;IAAA,CACJ;EACA,IAACE,MAAA,EAAQC,UAAA,EAAYH,KAAK,CAAC;EAC9B,sBAAA8B,GAAA,CAAQ,aAAU;IAAA7B,GAAA;IAAU8B,MAAA,EAAQvB,MAAA;IAAQwB,OAAA,EAAS;EAAM;AAC7D,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}