{"ast":null,"code":"var _jsxFileName = \"/Users/kasaikazunobu/project/ai/babel/ripple/3d-ripple-animation/src/components/ParticleText.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport { useFrame, useLoader } from '@react-three/fiber';\nimport * as THREE from 'three';\nimport { FontLoader } from 'three/examples/jsm/loaders/FontLoader';\nimport { TextGeometry } from 'three/examples/jsm/geometries/TextGeometry';\nimport circleImg from '../assets/circle.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ParticleText({\n  text\n}) {\n  _s();\n  const meshRef = useRef();\n  const imgTex = useLoader(THREE.TextureLoader, circleImg);\n  //   const font = useLoader(FontLoader, 'src/assets/Baskervville_Regular.json'); // フォントファイルのパスを指定\n  const font = useLoader(FontLoader, '/Baskervville_Regular.json');\n  const [targetPositions, setTargetPositions] = useState([]);\n  useEffect(() => {\n    if (font && meshRef.current) {\n      const geometry = new TextGeometry(text, {\n        font: font,\n        size: 1,\n        height: 0.2,\n        curveSegments: 12,\n        bevelEnabled: false\n      });\n      geometry.center();\n      const points = geometry.toNonIndexed().attributes.position.array;\n      const positions = [];\n      const targets = [];\n      for (let i = 0; i < points.length; i += 3) {\n        positions.push(Math.random() * 10 - 5,\n        // ランダムな初期位置X\n        Math.random() * 10 - 5,\n        // ランダムな初期位置Y\n        Math.random() * 10 - 5 // ランダムな初期位置Z\n        );\n        targets.push(points[i], points[i + 1], points[i + 2]);\n      }\n      meshRef.current.geometry.setAttribute('position', new THREE.BufferAttribute(new Float32Array(positions), 3));\n      setTargetPositions(targets);\n    }\n  }, [font, text]);\n  const handlePointerDown = event => {\n    // Implement particle scattering logic here\n    const positions = meshRef.current.geometry.attributes.position.array;\n    for (let i = 0; i < positions.length; i++) {\n      positions[i] += (Math.random() - 0.5) * 2; // Scatter particles\n    }\n    meshRef.current.geometry.attributes.position.needsUpdate = true;\n  };\n  useFrame(() => {\n    if (meshRef.current && targetPositions.length > 0) {\n      const positions = meshRef.current.geometry.attributes.position.array;\n      for (let i = 0; i < positions.length; i++) {\n        // 目標位置に向かって少しずつ移動\n        positions[i] += (targetPositions[i] - positions[i]) * 0.02;\n      }\n      meshRef.current.geometry.attributes.position.needsUpdate = true;\n      meshRef.current.rotation.y += 0.001;\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"points\", {\n    ref: meshRef,\n    onPointerDown: handlePointerDown,\n    children: [/*#__PURE__*/_jsxDEV(\"bufferGeometry\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"pointsMaterial\", {\n      map: imgTex,\n      color: 0xffa500,\n      size: 0.05,\n      sizeAttenuation: true,\n      transparent: true,\n      opacity: 0.8,\n      blending: THREE.AdditiveBlending\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(ParticleText, \"fK6CG8Wnou2otgue0gADqpU5j2Q=\", false, function () {\n  return [useLoader, useLoader, useFrame];\n});\n_c = ParticleText;\nexport default ParticleText;\nvar _c;\n$RefreshReg$(_c, \"ParticleText\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useFrame","useLoader","THREE","FontLoader","TextGeometry","circleImg","jsxDEV","_jsxDEV","ParticleText","text","_s","meshRef","imgTex","TextureLoader","font","targetPositions","setTargetPositions","current","geometry","size","height","curveSegments","bevelEnabled","center","points","toNonIndexed","attributes","position","array","positions","targets","i","length","push","Math","random","setAttribute","BufferAttribute","Float32Array","handlePointerDown","event","needsUpdate","rotation","y","ref","onPointerDown","children","fileName","_jsxFileName","lineNumber","columnNumber","map","color","sizeAttenuation","transparent","opacity","blending","AdditiveBlending","_c","$RefreshReg$"],"sources":["/Users/kasaikazunobu/project/ai/babel/ripple/3d-ripple-animation/src/components/ParticleText.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport { useFrame, useLoader } from '@react-three/fiber';\nimport * as THREE from 'three';\nimport { FontLoader } from 'three/examples/jsm/loaders/FontLoader';\nimport { TextGeometry } from 'three/examples/jsm/geometries/TextGeometry';\nimport circleImg from '../assets/circle.png';\n\n\n\nfunction ParticleText({ text }) {\n  const meshRef = useRef();\n  const imgTex = useLoader(THREE.TextureLoader, circleImg);\n//   const font = useLoader(FontLoader, 'src/assets/Baskervville_Regular.json'); // フォントファイルのパスを指定\nconst font = useLoader(FontLoader, '/Baskervville_Regular.json');\n  const [targetPositions, setTargetPositions] = useState([]);\n\n  useEffect(() => {\n    if (font && meshRef.current) {\n      const geometry = new TextGeometry(text, {\n        font: font,\n        size: 1,\n        height: 0.2,\n        curveSegments: 12,\n        bevelEnabled: false,\n      });\n      geometry.center();\n      const points = geometry.toNonIndexed().attributes.position.array;\n      const positions = [];\n      const targets = [];\n      for (let i = 0; i < points.length; i += 3) {\n        positions.push(\n          Math.random() * 10 - 5, // ランダムな初期位置X\n          Math.random() * 10 - 5, // ランダムな初期位置Y\n          Math.random() * 10 - 5  // ランダムな初期位置Z\n        );\n        targets.push(points[i], points[i + 1], points[i + 2]);\n      }\n      meshRef.current.geometry.setAttribute(\n        'position',\n        new THREE.BufferAttribute(new Float32Array(positions), 3)\n      );\n      setTargetPositions(targets);\n    }\n  }, [font, text]);\n\n  const handlePointerDown = (event) => {\n    // Implement particle scattering logic here\n    const positions = meshRef.current.geometry.attributes.position.array;\n    for (let i = 0; i < positions.length; i++) {\n      positions[i] += (Math.random() - 0.5) * 2; // Scatter particles\n    }\n    meshRef.current.geometry.attributes.position.needsUpdate = true;\n  };\n\n  useFrame(() => {\n    if (meshRef.current && targetPositions.length > 0) {\n      const positions = meshRef.current.geometry.attributes.position.array;\n      for (let i = 0; i < positions.length; i++) {\n        // 目標位置に向かって少しずつ移動\n        positions[i] += (targetPositions[i] - positions[i]) * 0.02;\n      }\n      meshRef.current.geometry.attributes.position.needsUpdate = true;\n      meshRef.current.rotation.y += 0.001;\n    }\n  });\n\n  return (\n    <points ref={meshRef} onPointerDown={handlePointerDown}>\n      <bufferGeometry />\n      <pointsMaterial\n        map={imgTex}\n        color={0xffa500}\n        size={0.05}\n        sizeAttenuation\n        transparent={true}\n        opacity={0.8}\n        blending={THREE.AdditiveBlending}\n      />\n    </points>\n  );\n}\n\nexport default ParticleText;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}